{
  "timestamp_utc": "2026-02-28T04:08:56.218878+00:00",
  "overall_passed": false,
  "results": [
    {
      "name": "serial_smoke",
      "state": "PASS",
      "details": {
        "ping": {
          "ok": true,
          "result": "PONG"
        },
        "status": {
          "board_profile": "ESP32_A252",
          "active_scene": "",
          "active_step": "",
          "hotline_validation_state": "none",
          "telephony": {
            "state": "IDLE",
            "hook": "ON_HOOK",
            "powered": false,
            "power_probe_active": false,
            "slic_power_down": true,
            "dial_buffer": "",
            "dial_source": "NONE",
            "dial_match_state": "NONE",
            "hotline_active": false,
            "hotline_current_key": "",
            "hotline_queued_key": "",
            "hotline_next_restart_ms": 0,
            "hotline_ringback_active": false,
            "hotline_ringback_until_ms": 0,
            "hotline_ringback_profile": "NONE",
            "hotline_validation_state": "none",
            "pending_espnow_call": false,
            "pending_espnow_call_kind": "file",
            "pending_espnow_call_profile": "NONE",
            "pending_espnow_call_event": "NONE",
            "pending_espnow_call_audio": "",
            "pending_espnow_call_source": "AUTO"
          },
          "audio_frames_requested": 0,
          "audio_frames_read": 0,
          "audio_drop_frames": 0,
          "audio_underrun_count": 0,
          "audio_last_latency_ms": 0,
          "audio_max_latency_ms": 0,
          "audio": {
            "full_duplex": true,
            "ready": true,
            "dial_tone_active": false,
            "tone_route_active": false,
            "tone_rendering": false,
            "tone_active": false,
            "tone_profile": "NONE",
            "tone_event": "none",
            "tone_engine": "NONE",
            "playback_input_sample_rate": 0,
            "playback_input_bits_per_sample": 0,
            "playback_input_channels": 0,
            "playback_output_sample_rate": 8000,
            "playback_output_bits_per_sample": 16,
            "playback_output_channels": 2,
            "playback_resampler_active": false,
            "playback_channel_upmix_active": false,
            "playback_loudness_auto": false,
            "playback_loudness_gain_db": 0,
            "playback_limiter_active": false,
            "playback_rate_fallback": 0,
            "playback_copy_source_bytes": 0,
            "playback_copy_accepted_bytes": 0,
            "playback_copy_loss_bytes": 0,
            "playback_copy_loss_events": 0,
            "playback_last_error": "",
            "playback_sample_rate": 8000,
            "playback_bits_per_sample": 16,
            "playback_channels": 2,
            "playback_format_overridden": false,
            "playing": false,
            "sd_ready": false,
            "littlefs_ready": false,
            "storage_default_policy": "SD_THEN_LITTLEFS",
            "storage_last_source": "NONE",
            "storage_last_path": "",
            "frames": 0,
            "underrun": 0,
            "drop": 0,
            "latence_ms": 0,
            "adc_fft_peak_bin": 0,
            "adc_fft_peak_freq_hz": 0,
            "adc_fft_peak_mag": 0,
            "tone_jitter_us_max": 0,
            "tone_write_miss_count": 0
          },
          "scope_display": {
            "supported": false,
            "enabled": false,
            "frequency": 1200,
            "amplitude": 48
          },
          "espnow": {
            "ready": true,
            "device_name": "HOTLINE_PHONE",
            "peer_count": 2,
            "tx_ok": 0,
            "tx_fail": 0,
            "rx_count": 0,
            "last_rx_mac": "",
            "last_rx_payload": "",
            "peers": [
              "10:20:BA:58:C7:49",
              "10:20:BA:58:C7:48"
            ],
            "hotline_notify_last_event": "",
            "hotline_notify_last_ok": false,
            "peer_discovery_enabled": true,
            "peer_discovery_interval_ms": 30000,
            "peer_discovery_ack_window_ms": 2500,
            "peer_discovery_next_probe_ms": 30330,
            "peer_discovery_probe_pending": false,
            "peer_discovery_probe_msg_id": "",
            "peer_discovery_probe_seq": 0,
            "peer_discovery_probes_sent": 0,
            "peer_discovery_probe_send_fail": 0,
            "peer_discovery_probe_ack_seen": 0,
            "peer_discovery_auto_add_new_ok": 0,
            "peer_discovery_auto_add_fail": 0,
            "peer_discovery_last_mac": "",
            "peer_discovery_last_device_name": "",
            "peer_discovery_last_error": "",
            "scene_sync_enabled": true,
            "scene_sync_interval_ms": 30000,
            "scene_sync_pending": false,
            "scene_sync_msg_id": "",
            "scene_sync_seq": 0,
            "scene_sync_requests_sent": 0,
            "scene_sync_request_send_fail": 0,
            "scene_sync_ack_ok": 0,
            "scene_sync_ack_fail": 0,
            "scene_sync_last_error": "",
            "scene_sync_last_source": "",
            "scene_sync_last_update_ms": 0
          },
          "hw": {
            "init_ok": true,
            "slic_ready": true,
            "codec_ready": true,
            "audio_ready": true
          },
          "config": {
            "pins": {
              "i2s": {
                "bck": 27,
                "ws": 25,
                "dout": 26,
                "din": 35
              },
              "codec_i2c": {
                "sda": 33,
                "scl": 32
              },
              "slic": {
                "rm": 18,
                "fr": 5,
                "shk": 23,
                "line": -1,
                "pd": 19,
                "adc_in": -1,
                "hook_active_high": false
              },
              "pcm": {
                "flt": -1,
                "demp": -1,
                "xsmt": -1,
                "fmt": -1
              }
            },
            "audio": {
              "sample_rate": 8000,
              "bits_per_sample": 16,
              "enable_capture": false,
              "adc_dsp_enabled": true,
              "adc_fft_enabled": true,
              "adc_dsp_fft_downsample": 2,
              "adc_fft_ignore_low_bin": 1,
              "adc_fft_ignore_high_bin": 1,
              "volume": 100,
              "mute": false,
              "route": "rtc",
              "clock_policy": "HYBRID_TELCO",
              "wav_loudness_policy": "FIXED_GAIN_ONLY",
              "wav_target_rms_dbfs": -18,
              "wav_limiter_ceiling_dbfs": -2,
              "wav_limiter_attack_ms": 8,
              "wav_limiter_release_ms": 120
            },
            "espnow_device_name": "HOTLINE_PHONE",
            "espnow_call_map": {
              "LA_OK": {
                "kind": "tone",
                "profile": "FR_FR",
                "event": "busy"
              }
            },
            "dial_media_map": {
              "1": {
                "kind": "file",
                "path": "/hotline/menu_dtmf_short.wav",
                "source": "SD",
                "playback": {
                  "loop": true,
                  "pause_ms": 3000
                }
              },
              "2": {
                "kind": "file",
                "path": "/hotline/menu_dtmf.wav",
                "source": "SD",
                "playback": {
                  "loop": true,
                  "pause_ms": 3000
                }
              },
              "3": {
                "kind": "file",
                "path": "/hotline/menu_dtmf_long.wav",
                "source": "SD",
                "playback": {
                  "loop": true,
                  "pause_ms": 3000
                }
              }
            },
            "espnow_peers": [
              "10:20:BA:58:C7:49",
              "10:20:BA:58:C7:48"
            ]
          },
          "config_migrations": {
            "espnow_call_map_reset": false,
            "dial_media_map_reset": false
          },
          "firmware": {
            "build_id": "Feb 28 2026 04:56:16",
            "git_sha": "unknown",
            "contract_version": "A252_AUDIO_CHAIN_V4"
          }
        },
        "capture_start": {
          "ok": false,
          "line": "ERR CAPTURE_START"
        },
        "capture_stop": {
          "ok": true,
          "line": "OK CAPTURE_STOP"
        },
        "reset_metrics": {
          "ok": true,
          "line": "OK RESET_METRICS"
        },
        "required_checks": [
          "PING",
          "STATUS",
          "CAPTURE_STOP",
          "RESET_METRICS"
        ],
        "failed_checks": [],
        "warnings": [
          "capture_start_failed_capture_disabled"
        ]
      }
    },
    {
      "name": "serial_firmware_contract",
      "state": "PASS",
      "details": {
        "status": {
          "board_profile": "ESP32_A252",
          "active_scene": "",
          "active_step": "",
          "hotline_validation_state": "none",
          "telephony": {
            "state": "IDLE",
            "hook": "ON_HOOK",
            "powered": false,
            "power_probe_active": false,
            "slic_power_down": true,
            "dial_buffer": "",
            "dial_source": "NONE",
            "dial_match_state": "NONE",
            "hotline_active": false,
            "hotline_current_key": "",
            "hotline_queued_key": "",
            "hotline_next_restart_ms": 0,
            "hotline_ringback_active": false,
            "hotline_ringback_until_ms": 0,
            "hotline_ringback_profile": "NONE",
            "hotline_validation_state": "none",
            "pending_espnow_call": false,
            "pending_espnow_call_kind": "file",
            "pending_espnow_call_profile": "NONE",
            "pending_espnow_call_event": "NONE",
            "pending_espnow_call_audio": "",
            "pending_espnow_call_source": "AUTO"
          },
          "audio_frames_requested": 0,
          "audio_frames_read": 0,
          "audio_drop_frames": 0,
          "audio_underrun_count": 0,
          "audio_last_latency_ms": 0,
          "audio_max_latency_ms": 0,
          "audio": {
            "full_duplex": true,
            "ready": true,
            "dial_tone_active": false,
            "tone_route_active": false,
            "tone_rendering": false,
            "tone_active": false,
            "tone_profile": "NONE",
            "tone_event": "none",
            "tone_engine": "NONE",
            "playback_input_sample_rate": 0,
            "playback_input_bits_per_sample": 0,
            "playback_input_channels": 0,
            "playback_output_sample_rate": 8000,
            "playback_output_bits_per_sample": 16,
            "playback_output_channels": 2,
            "playback_resampler_active": false,
            "playback_channel_upmix_active": false,
            "playback_loudness_auto": false,
            "playback_loudness_gain_db": 0,
            "playback_limiter_active": false,
            "playback_rate_fallback": 0,
            "playback_copy_source_bytes": 0,
            "playback_copy_accepted_bytes": 0,
            "playback_copy_loss_bytes": 0,
            "playback_copy_loss_events": 0,
            "playback_last_error": "",
            "playback_sample_rate": 8000,
            "playback_bits_per_sample": 16,
            "playback_channels": 2,
            "playback_format_overridden": false,
            "playing": false,
            "sd_ready": false,
            "littlefs_ready": false,
            "storage_default_policy": "SD_THEN_LITTLEFS",
            "storage_last_source": "NONE",
            "storage_last_path": "",
            "frames": 0,
            "underrun": 0,
            "drop": 0,
            "latence_ms": 0,
            "adc_fft_peak_bin": 0,
            "adc_fft_peak_freq_hz": 0,
            "adc_fft_peak_mag": 0,
            "tone_jitter_us_max": 0,
            "tone_write_miss_count": 0
          },
          "scope_display": {
            "supported": false,
            "enabled": false,
            "frequency": 1200,
            "amplitude": 48
          },
          "espnow": {
            "ready": true,
            "device_name": "HOTLINE_PHONE",
            "peer_count": 2,
            "tx_ok": 0,
            "tx_fail": 0,
            "rx_count": 0,
            "last_rx_mac": "",
            "last_rx_payload": "",
            "peers": [
              "10:20:BA:58:C7:49",
              "10:20:BA:58:C7:48"
            ],
            "hotline_notify_last_event": "",
            "hotline_notify_last_ok": false,
            "peer_discovery_enabled": true,
            "peer_discovery_interval_ms": 30000,
            "peer_discovery_ack_window_ms": 2500,
            "peer_discovery_next_probe_ms": 30330,
            "peer_discovery_probe_pending": false,
            "peer_discovery_probe_msg_id": "",
            "peer_discovery_probe_seq": 0,
            "peer_discovery_probes_sent": 0,
            "peer_discovery_probe_send_fail": 0,
            "peer_discovery_probe_ack_seen": 0,
            "peer_discovery_auto_add_new_ok": 0,
            "peer_discovery_auto_add_fail": 0,
            "peer_discovery_last_mac": "",
            "peer_discovery_last_device_name": "",
            "peer_discovery_last_error": "",
            "scene_sync_enabled": true,
            "scene_sync_interval_ms": 30000,
            "scene_sync_pending": false,
            "scene_sync_msg_id": "",
            "scene_sync_seq": 0,
            "scene_sync_requests_sent": 0,
            "scene_sync_request_send_fail": 0,
            "scene_sync_ack_ok": 0,
            "scene_sync_ack_fail": 0,
            "scene_sync_last_error": "",
            "scene_sync_last_source": "",
            "scene_sync_last_update_ms": 0
          },
          "hw": {
            "init_ok": true,
            "slic_ready": true,
            "codec_ready": true,
            "audio_ready": true
          },
          "config": {
            "pins": {
              "i2s": {
                "bck": 27,
                "ws": 25,
                "dout": 26,
                "din": 35
              },
              "codec_i2c": {
                "sda": 33,
                "scl": 32
              },
              "slic": {
                "rm": 18,
                "fr": 5,
                "shk": 23,
                "line": -1,
                "pd": 19,
                "adc_in": -1,
                "hook_active_high": false
              },
              "pcm": {
                "flt": -1,
                "demp": -1,
                "xsmt": -1,
                "fmt": -1
              }
            },
            "audio": {
              "sample_rate": 8000,
              "bits_per_sample": 16,
              "enable_capture": false,
              "adc_dsp_enabled": true,
              "adc_fft_enabled": true,
              "adc_dsp_fft_downsample": 2,
              "adc_fft_ignore_low_bin": 1,
              "adc_fft_ignore_high_bin": 1,
              "volume": 100,
              "mute": false,
              "route": "rtc",
              "clock_policy": "HYBRID_TELCO",
              "wav_loudness_policy": "FIXED_GAIN_ONLY",
              "wav_target_rms_dbfs": -18,
              "wav_limiter_ceiling_dbfs": -2,
              "wav_limiter_attack_ms": 8,
              "wav_limiter_release_ms": 120
            },
            "espnow_device_name": "HOTLINE_PHONE",
            "espnow_call_map": {
              "LA_OK": {
                "kind": "tone",
                "profile": "FR_FR",
                "event": "busy"
              }
            },
            "dial_media_map": {
              "1": {
                "kind": "file",
                "path": "/hotline/menu_dtmf_short.wav",
                "source": "SD",
                "playback": {
                  "loop": true,
                  "pause_ms": 3000
                }
              },
              "2": {
                "kind": "file",
                "path": "/hotline/menu_dtmf.wav",
                "source": "SD",
                "playback": {
                  "loop": true,
                  "pause_ms": 3000
                }
              },
              "3": {
                "kind": "file",
                "path": "/hotline/menu_dtmf_long.wav",
                "source": "SD",
                "playback": {
                  "loop": true,
                  "pause_ms": 3000
                }
              }
            },
            "espnow_peers": [
              "10:20:BA:58:C7:49",
              "10:20:BA:58:C7:48"
            ]
          },
          "config_migrations": {
            "espnow_call_map_reset": false,
            "dial_media_map_reset": false
          },
          "firmware": {
            "build_id": "Feb 28 2026 04:56:16",
            "git_sha": "unknown",
            "contract_version": "A252_AUDIO_CHAIN_V4"
          }
        },
        "checks": {
          "firmware_block_present": true,
          "firmware_required_keys_present": true,
          "audio_required_keys_present": true,
          "contract_version_matches": true
        },
        "missing_firmware_keys": [],
        "missing_audio_keys": [],
        "contract_version": "A252_AUDIO_CHAIN_V4",
        "required_contract_version": "A252_AUDIO_CHAIN_V4"
      }
    },
    {
      "name": "serial_hook_ring_audio",
      "state": "FAIL",
      "details": {
        "status_before": {
          "board_profile": "ESP32_A252",
          "active_scene": "",
          "active_step": "",
          "hotline_validation_state": "none",
          "telephony": {
            "state": "IDLE",
            "hook": "ON_HOOK",
            "powered": false,
            "power_probe_active": false,
            "slic_power_down": true,
            "dial_buffer": "",
            "dial_source": "NONE",
            "dial_match_state": "NONE",
            "hotline_active": false,
            "hotline_current_key": "",
            "hotline_queued_key": "",
            "hotline_next_restart_ms": 0,
            "hotline_ringback_active": false,
            "hotline_ringback_until_ms": 0,
            "hotline_ringback_profile": "NONE",
            "hotline_validation_state": "none",
            "pending_espnow_call": false,
            "pending_espnow_call_kind": "file",
            "pending_espnow_call_profile": "NONE",
            "pending_espnow_call_event": "NONE",
            "pending_espnow_call_audio": "",
            "pending_espnow_call_source": "AUTO"
          },
          "audio_frames_requested": 0,
          "audio_frames_read": 0,
          "audio_drop_frames": 0,
          "audio_underrun_count": 0,
          "audio_last_latency_ms": 0,
          "audio_max_latency_ms": 0,
          "audio": {
            "full_duplex": true,
            "ready": true,
            "dial_tone_active": false,
            "tone_route_active": false,
            "tone_rendering": false,
            "tone_active": false,
            "tone_profile": "NONE",
            "tone_event": "none",
            "tone_engine": "NONE",
            "playback_input_sample_rate": 0,
            "playback_input_bits_per_sample": 0,
            "playback_input_channels": 0,
            "playback_output_sample_rate": 8000,
            "playback_output_bits_per_sample": 16,
            "playback_output_channels": 2,
            "playback_resampler_active": false,
            "playback_channel_upmix_active": false,
            "playback_loudness_auto": false,
            "playback_loudness_gain_db": 0,
            "playback_limiter_active": false,
            "playback_rate_fallback": 0,
            "playback_copy_source_bytes": 0,
            "playback_copy_accepted_bytes": 0,
            "playback_copy_loss_bytes": 0,
            "playback_copy_loss_events": 0,
            "playback_last_error": "",
            "playback_sample_rate": 8000,
            "playback_bits_per_sample": 16,
            "playback_channels": 2,
            "playback_format_overridden": false,
            "playing": false,
            "sd_ready": false,
            "littlefs_ready": false,
            "storage_default_policy": "SD_THEN_LITTLEFS",
            "storage_last_source": "NONE",
            "storage_last_path": "",
            "frames": 0,
            "underrun": 0,
            "drop": 0,
            "latence_ms": 0,
            "adc_fft_peak_bin": 0,
            "adc_fft_peak_freq_hz": 0,
            "adc_fft_peak_mag": 0,
            "tone_jitter_us_max": 0,
            "tone_write_miss_count": 0
          },
          "scope_display": {
            "supported": false,
            "enabled": false,
            "frequency": 1200,
            "amplitude": 48
          },
          "espnow": {
            "ready": true,
            "device_name": "HOTLINE_PHONE",
            "peer_count": 2,
            "tx_ok": 0,
            "tx_fail": 0,
            "rx_count": 0,
            "last_rx_mac": "",
            "last_rx_payload": "",
            "peers": [
              "10:20:BA:58:C7:49",
              "10:20:BA:58:C7:48"
            ],
            "hotline_notify_last_event": "",
            "hotline_notify_last_ok": false,
            "peer_discovery_enabled": true,
            "peer_discovery_interval_ms": 30000,
            "peer_discovery_ack_window_ms": 2500,
            "peer_discovery_next_probe_ms": 30330,
            "peer_discovery_probe_pending": false,
            "peer_discovery_probe_msg_id": "",
            "peer_discovery_probe_seq": 0,
            "peer_discovery_probes_sent": 0,
            "peer_discovery_probe_send_fail": 0,
            "peer_discovery_probe_ack_seen": 0,
            "peer_discovery_auto_add_new_ok": 0,
            "peer_discovery_auto_add_fail": 0,
            "peer_discovery_last_mac": "",
            "peer_discovery_last_device_name": "",
            "peer_discovery_last_error": "",
            "scene_sync_enabled": true,
            "scene_sync_interval_ms": 30000,
            "scene_sync_pending": false,
            "scene_sync_msg_id": "",
            "scene_sync_seq": 0,
            "scene_sync_requests_sent": 0,
            "scene_sync_request_send_fail": 0,
            "scene_sync_ack_ok": 0,
            "scene_sync_ack_fail": 0,
            "scene_sync_last_error": "",
            "scene_sync_last_source": "",
            "scene_sync_last_update_ms": 0
          },
          "hw": {
            "init_ok": true,
            "slic_ready": true,
            "codec_ready": true,
            "audio_ready": true
          },
          "config": {
            "pins": {
              "i2s": {
                "bck": 27,
                "ws": 25,
                "dout": 26,
                "din": 35
              },
              "codec_i2c": {
                "sda": 33,
                "scl": 32
              },
              "slic": {
                "rm": 18,
                "fr": 5,
                "shk": 23,
                "line": -1,
                "pd": 19,
                "adc_in": -1,
                "hook_active_high": false
              },
              "pcm": {
                "flt": -1,
                "demp": -1,
                "xsmt": -1,
                "fmt": -1
              }
            },
            "audio": {
              "sample_rate": 8000,
              "bits_per_sample": 16,
              "enable_capture": false,
              "adc_dsp_enabled": true,
              "adc_fft_enabled": true,
              "adc_dsp_fft_downsample": 2,
              "adc_fft_ignore_low_bin": 1,
              "adc_fft_ignore_high_bin": 1,
              "volume": 100,
              "mute": false,
              "route": "rtc",
              "clock_policy": "HYBRID_TELCO",
              "wav_loudness_policy": "FIXED_GAIN_ONLY",
              "wav_target_rms_dbfs": -18,
              "wav_limiter_ceiling_dbfs": -2,
              "wav_limiter_attack_ms": 8,
              "wav_limiter_release_ms": 120
            },
            "espnow_device_name": "HOTLINE_PHONE",
            "espnow_call_map": {
              "LA_OK": {
                "kind": "tone",
                "profile": "FR_FR",
                "event": "busy"
              }
            },
            "dial_media_map": {
              "1": {
                "kind": "file",
                "path": "/hotline/menu_dtmf_short.wav",
                "source": "SD",
                "playback": {
                  "loop": true,
                  "pause_ms": 3000
                }
              },
              "2": {
                "kind": "file",
                "path": "/hotline/menu_dtmf.wav",
                "source": "SD",
                "playback": {
                  "loop": true,
                  "pause_ms": 3000
                }
              },
              "3": {
                "kind": "file",
                "path": "/hotline/menu_dtmf_long.wav",
                "source": "SD",
                "playback": {
                  "loop": true,
                  "pause_ms": 3000
                }
              }
            },
            "espnow_peers": [
              "10:20:BA:58:C7:49",
              "10:20:BA:58:C7:48"
            ]
          },
          "config_migrations": {
            "espnow_call_map_reset": false,
            "dial_media_map_reset": false
          },
          "firmware": {
            "build_id": "Feb 28 2026 04:56:16",
            "git_sha": "unknown",
            "contract_version": "A252_AUDIO_CHAIN_V4"
          }
        },
        "tone_on": {
          "ok": true,
          "line": "OK TONE_ON"
        },
        "status_tone_on": {
          "board_profile": "ESP32_A252",
          "active_scene": "",
          "active_step": "",
          "hotline_validation_state": "none",
          "telephony": {
            "state": "IDLE",
            "hook": "ON_HOOK",
            "powered": true,
            "power_probe_active": false,
            "slic_power_down": false,
            "dial_buffer": "",
            "dial_source": "NONE",
            "dial_match_state": "NONE",
            "hotline_active": false,
            "hotline_current_key": "",
            "hotline_queued_key": "",
            "hotline_next_restart_ms": 0,
            "hotline_ringback_active": false,
            "hotline_ringback_until_ms": 0,
            "hotline_ringback_profile": "NONE",
            "hotline_validation_state": "none",
            "pending_espnow_call": false,
            "pending_espnow_call_kind": "file",
            "pending_espnow_call_profile": "NONE",
            "pending_espnow_call_event": "NONE",
            "pending_espnow_call_audio": "",
            "pending_espnow_call_source": "AUTO"
          },
          "audio_frames_requested": 0,
          "audio_frames_read": 0,
          "audio_drop_frames": 0,
          "audio_underrun_count": 0,
          "audio_last_latency_ms": 0,
          "audio_max_latency_ms": 0,
          "audio": {
            "full_duplex": true,
            "ready": true,
            "dial_tone_active": false,
            "tone_route_active": false,
            "tone_rendering": false,
            "tone_active": false,
            "tone_profile": "NONE",
            "tone_event": "none",
            "tone_engine": "NONE",
            "playback_input_sample_rate": 0,
            "playback_input_bits_per_sample": 0,
            "playback_input_channels": 0,
            "playback_output_sample_rate": 8000,
            "playback_output_bits_per_sample": 16,
            "playback_output_channels": 2,
            "playback_resampler_active": false,
            "playback_channel_upmix_active": false,
            "playback_loudness_auto": false,
            "playback_loudness_gain_db": 0,
            "playback_limiter_active": false,
            "playback_rate_fallback": 0,
            "playback_copy_source_bytes": 0,
            "playback_copy_accepted_bytes": 0,
            "playback_copy_loss_bytes": 0,
            "playback_copy_loss_events": 0,
            "playback_last_error": "",
            "playback_sample_rate": 8000,
            "playback_bits_per_sample": 16,
            "playback_channels": 2,
            "playback_format_overridden": false,
            "playing": false,
            "sd_ready": false,
            "littlefs_ready": false,
            "storage_default_policy": "SD_THEN_LITTLEFS",
            "storage_last_source": "NONE",
            "storage_last_path": "",
            "frames": 0,
            "underrun": 0,
            "drop": 0,
            "latence_ms": 0,
            "adc_fft_peak_bin": 0,
            "adc_fft_peak_freq_hz": 0,
            "adc_fft_peak_mag": 0,
            "tone_jitter_us_max": 0,
            "tone_write_miss_count": 0
          },
          "scope_display": {
            "supported": false,
            "enabled": false,
            "frequency": 1200,
            "amplitude": 48
          },
          "espnow": {
            "ready": true,
            "device_name": "HOTLINE_PHONE",
            "peer_count": 2,
            "tx_ok": 0,
            "tx_fail": 0,
            "rx_count": 0,
            "last_rx_mac": "",
            "last_rx_payload": "",
            "peers": [
              "10:20:BA:58:C7:49",
              "10:20:BA:58:C7:48"
            ],
            "hotline_notify_last_event": "",
            "hotline_notify_last_ok": false,
            "peer_discovery_enabled": true,
            "peer_discovery_interval_ms": 30000,
            "peer_discovery_ack_window_ms": 2500,
            "peer_discovery_next_probe_ms": 30330,
            "peer_discovery_probe_pending": false,
            "peer_discovery_probe_msg_id": "",
            "peer_discovery_probe_seq": 0,
            "peer_discovery_probes_sent": 0,
            "peer_discovery_probe_send_fail": 0,
            "peer_discovery_probe_ack_seen": 0,
            "peer_discovery_auto_add_new_ok": 0,
            "peer_discovery_auto_add_fail": 0,
            "peer_discovery_last_mac": "",
            "peer_discovery_last_device_name": "",
            "peer_discovery_last_error": "",
            "scene_sync_enabled": true,
            "scene_sync_interval_ms": 30000,
            "scene_sync_pending": false,
            "scene_sync_msg_id": "",
            "scene_sync_seq": 0,
            "scene_sync_requests_sent": 0,
            "scene_sync_request_send_fail": 0,
            "scene_sync_ack_ok": 0,
            "scene_sync_ack_fail": 0,
            "scene_sync_last_error": "",
            "scene_sync_last_source": "",
            "scene_sync_last_update_ms": 0
          },
          "hw": {
            "init_ok": true,
            "slic_ready": true,
            "codec_ready": true,
            "audio_ready": true
          },
          "config": {
            "pins": {
              "i2s": {
                "bck": 27,
                "ws": 25,
                "dout": 26,
                "din": 35
              },
              "codec_i2c": {
                "sda": 33,
                "scl": 32
              },
              "slic": {
                "rm": 18,
                "fr": 5,
                "shk": 23,
                "line": -1,
                "pd": 19,
                "adc_in": -1,
                "hook_active_high": false
              },
              "pcm": {
                "flt": -1,
                "demp": -1,
                "xsmt": -1,
                "fmt": -1
              }
            },
            "audio": {
              "sample_rate": 8000,
              "bits_per_sample": 16,
              "enable_capture": false,
              "adc_dsp_enabled": true,
              "adc_fft_enabled": true,
              "adc_dsp_fft_downsample": 2,
              "adc_fft_ignore_low_bin": 1,
              "adc_fft_ignore_high_bin": 1,
              "volume": 100,
              "mute": false,
              "route": "rtc",
              "clock_policy": "HYBRID_TELCO",
              "wav_loudness_policy": "FIXED_GAIN_ONLY",
              "wav_target_rms_dbfs": -18,
              "wav_limiter_ceiling_dbfs": -2,
              "wav_limiter_attack_ms": 8,
              "wav_limiter_release_ms": 120
            },
            "espnow_device_name": "HOTLINE_PHONE",
            "espnow_call_map": {
              "LA_OK": {
                "kind": "tone",
                "profile": "FR_FR",
                "event": "busy"
              }
            },
            "dial_media_map": {
              "1": {
                "kind": "file",
                "path": "/hotline/menu_dtmf_short.wav",
                "source": "SD",
                "playback": {
                  "loop": true,
                  "pause_ms": 3000
                }
              },
              "2": {
                "kind": "file",
                "path": "/hotline/menu_dtmf.wav",
                "source": "SD",
                "playback": {
                  "loop": true,
                  "pause_ms": 3000
                }
              },
              "3": {
                "kind": "file",
                "path": "/hotline/menu_dtmf_long.wav",
                "source": "SD",
                "playback": {
                  "loop": true,
                  "pause_ms": 3000
                }
              }
            },
            "espnow_peers": [
              "10:20:BA:58:C7:49",
              "10:20:BA:58:C7:48"
            ]
          },
          "config_migrations": {
            "espnow_call_map_reset": false,
            "dial_media_map_reset": false
          },
          "firmware": {
            "build_id": "Feb 28 2026 04:56:16",
            "git_sha": "unknown",
            "contract_version": "A252_AUDIO_CHAIN_V4"
          }
        },
        "tone_off": {
          "ok": true,
          "line": "OK TONE_OFF"
        },
        "status_tone_off": {
          "board_profile": "ESP32_A252",
          "active_scene": "",
          "active_step": "",
          "hotline_validation_state": "none",
          "telephony": {
            "state": "IDLE",
            "hook": "ON_HOOK",
            "powered": true,
            "power_probe_active": false,
            "slic_power_down": false,
            "dial_buffer": "",
            "dial_source": "NONE",
            "dial_match_state": "NONE",
            "hotline_active": false,
            "hotline_current_key": "",
            "hotline_queued_key": "",
            "hotline_next_restart_ms": 0,
            "hotline_ringback_active": false,
            "hotline_ringback_until_ms": 0,
            "hotline_ringback_profile": "NONE",
            "hotline_validation_state": "none",
            "pending_espnow_call": false,
            "pending_espnow_call_kind": "file",
            "pending_espnow_call_profile": "NONE",
            "pending_espnow_call_event": "NONE",
            "pending_espnow_call_audio": "",
            "pending_espnow_call_source": "AUTO"
          },
          "audio_frames_requested": 0,
          "audio_frames_read": 0,
          "audio_drop_frames": 0,
          "audio_underrun_count": 0,
          "audio_last_latency_ms": 0,
          "audio_max_latency_ms": 0,
          "audio": {
            "full_duplex": true,
            "ready": true,
            "dial_tone_active": false,
            "tone_route_active": false,
            "tone_rendering": false,
            "tone_active": false,
            "tone_profile": "NONE",
            "tone_event": "none",
            "tone_engine": "NONE",
            "playback_input_sample_rate": 0,
            "playback_input_bits_per_sample": 0,
            "playback_input_channels": 0,
            "playback_output_sample_rate": 8000,
            "playback_output_bits_per_sample": 16,
            "playback_output_channels": 2,
            "playback_resampler_active": false,
            "playback_channel_upmix_active": false,
            "playback_loudness_auto": false,
            "playback_loudness_gain_db": 0,
            "playback_limiter_active": false,
            "playback_rate_fallback": 0,
            "playback_copy_source_bytes": 0,
            "playback_copy_accepted_bytes": 0,
            "playback_copy_loss_bytes": 0,
            "playback_copy_loss_events": 0,
            "playback_last_error": "",
            "playback_sample_rate": 8000,
            "playback_bits_per_sample": 16,
            "playback_channels": 2,
            "playback_format_overridden": false,
            "playing": false,
            "sd_ready": false,
            "littlefs_ready": false,
            "storage_default_policy": "SD_THEN_LITTLEFS",
            "storage_last_source": "NONE",
            "storage_last_path": "",
            "frames": 0,
            "underrun": 0,
            "drop": 0,
            "latence_ms": 0,
            "adc_fft_peak_bin": 0,
            "adc_fft_peak_freq_hz": 0,
            "adc_fft_peak_mag": 0,
            "tone_jitter_us_max": 0,
            "tone_write_miss_count": 0
          },
          "scope_display": {
            "supported": false,
            "enabled": false,
            "frequency": 1200,
            "amplitude": 48
          },
          "espnow": {
            "ready": true,
            "device_name": "HOTLINE_PHONE",
            "peer_count": 2,
            "tx_ok": 0,
            "tx_fail": 0,
            "rx_count": 0,
            "last_rx_mac": "",
            "last_rx_payload": "",
            "peers": [
              "10:20:BA:58:C7:49",
              "10:20:BA:58:C7:48"
            ],
            "hotline_notify_last_event": "",
            "hotline_notify_last_ok": false,
            "peer_discovery_enabled": true,
            "peer_discovery_interval_ms": 30000,
            "peer_discovery_ack_window_ms": 2500,
            "peer_discovery_next_probe_ms": 30330,
            "peer_discovery_probe_pending": false,
            "peer_discovery_probe_msg_id": "",
            "peer_discovery_probe_seq": 0,
            "peer_discovery_probes_sent": 0,
            "peer_discovery_probe_send_fail": 0,
            "peer_discovery_probe_ack_seen": 0,
            "peer_discovery_auto_add_new_ok": 0,
            "peer_discovery_auto_add_fail": 0,
            "peer_discovery_last_mac": "",
            "peer_discovery_last_device_name": "",
            "peer_discovery_last_error": "",
            "scene_sync_enabled": true,
            "scene_sync_interval_ms": 30000,
            "scene_sync_pending": false,
            "scene_sync_msg_id": "",
            "scene_sync_seq": 0,
            "scene_sync_requests_sent": 0,
            "scene_sync_request_send_fail": 0,
            "scene_sync_ack_ok": 0,
            "scene_sync_ack_fail": 0,
            "scene_sync_last_error": "",
            "scene_sync_last_source": "",
            "scene_sync_last_update_ms": 0
          },
          "hw": {
            "init_ok": true,
            "slic_ready": true,
            "codec_ready": true,
            "audio_ready": true
          },
          "config": {
            "pins": {
              "i2s": {
                "bck": 27,
                "ws": 25,
                "dout": 26,
                "din": 35
              },
              "codec_i2c": {
                "sda": 33,
                "scl": 32
              },
              "slic": {
                "rm": 18,
                "fr": 5,
                "shk": 23,
                "line": -1,
                "pd": 19,
                "adc_in": -1,
                "hook_active_high": false
              },
              "pcm": {
                "flt": -1,
                "demp": -1,
                "xsmt": -1,
                "fmt": -1
              }
            },
            "audio": {
              "sample_rate": 8000,
              "bits_per_sample": 16,
              "enable_capture": false,
              "adc_dsp_enabled": true,
              "adc_fft_enabled": true,
              "adc_dsp_fft_downsample": 2,
              "adc_fft_ignore_low_bin": 1,
              "adc_fft_ignore_high_bin": 1,
              "volume": 100,
              "mute": false,
              "route": "rtc",
              "clock_policy": "HYBRID_TELCO",
              "wav_loudness_policy": "FIXED_GAIN_ONLY",
              "wav_target_rms_dbfs": -18,
              "wav_limiter_ceiling_dbfs": -2,
              "wav_limiter_attack_ms": 8,
              "wav_limiter_release_ms": 120
            },
            "espnow_device_name": "HOTLINE_PHONE",
            "espnow_call_map": {
              "LA_OK": {
                "kind": "tone",
                "profile": "FR_FR",
                "event": "busy"
              }
            },
            "dial_media_map": {
              "1": {
                "kind": "file",
                "path": "/hotline/menu_dtmf_short.wav",
                "source": "SD",
                "playback": {
                  "loop": true,
                  "pause_ms": 3000
                }
              },
              "2": {
                "kind": "file",
                "path": "/hotline/menu_dtmf.wav",
                "source": "SD",
                "playback": {
                  "loop": true,
                  "pause_ms": 3000
                }
              },
              "3": {
                "kind": "file",
                "path": "/hotline/menu_dtmf_long.wav",
                "source": "SD",
                "playback": {
                  "loop": true,
                  "pause_ms": 3000
                }
              }
            },
            "espnow_peers": [
              "10:20:BA:58:C7:49",
              "10:20:BA:58:C7:48"
            ]
          },
          "config_migrations": {
            "espnow_call_map_reset": false,
            "dial_media_map_reset": false
          },
          "firmware": {
            "build_id": "Feb 28 2026 04:56:16",
            "git_sha": "unknown",
            "contract_version": "A252_AUDIO_CHAIN_V4"
          }
        },
        "hook_values_observed": [
          "ON_HOOK"
        ],
        "hook_observe_seconds": 45,
        "required_hook_states": [
          "BYPASSED"
        ],
        "hook_validation_mode": "BYPASSED_NON_PRESENTIEL",
        "checks": {
          "tone_on_ok": true,
          "tone_route_active_after_on": false,
          "tone_rendering_after_on": false,
          "tone_event_after_on": false,
          "tone_off_ok": true,
          "tone_route_inactive_after_off": true,
          "hook_ok": true
        },
        "warnings": [
          "hook checks skipped because --no-require-hook-toggle is enabled"
        ],
        "tone_rendering_after_off": false
      }
    },
    {
      "name": "serial_hotline_defaults",
      "state": "FAIL",
      "details": {
        "dial_media_map_get": {
          "1": {
            "kind": "file",
            "path": "/hotline/menu_dtmf_short.wav",
            "source": "SD",
            "playback": {
              "loop": true,
              "pause_ms": 3000
            }
          },
          "2": {
            "kind": "file",
            "path": "/hotline/menu_dtmf.wav",
            "source": "SD",
            "playback": {
              "loop": true,
              "pause_ms": 3000
            }
          },
          "3": {
            "kind": "file",
            "path": "/hotline/menu_dtmf_long.wav",
            "source": "SD",
            "playback": {
              "loop": true,
              "pause_ms": 3000
            }
          }
        },
        "expected": {
          "1": "/welcome.wav",
          "2": "/souffle.wav",
          "3": "/radio.wav"
        },
        "found_paths": {
          "1": "/hotline/menu_dtmf_short.wav",
          "2": "/hotline/menu_dtmf.wav",
          "3": "/hotline/menu_dtmf_long.wav"
        },
        "checks": {
          "dial_media_map_is_object": true,
          "dial_media_map_exact_keys": true,
          "dial_1_welcome": false,
          "dial_2_souffle": false,
          "dial_3_radio": false
        }
      }
    },
    {
      "name": "serial_media_routing",
      "state": "FAIL",
      "details": {
        "dial_media_map_set": {
          "ok": true,
          "line": "OK DIAL_MEDIA_MAP_SET_VOLATILE"
        },
        "dial_media_map_get": {
          "0123456789": {
            "kind": "tone",
            "profile": "FR_FR",
            "event": "ringback"
          }
        },
        "espnow_call_map_set": {
          "ok": true,
          "line": "OK ESPNOW_CALL_MAP_SET_VOLATILE"
        },
        "espnow_call_map_set_legacy_tone": {
          "ok": false,
          "line": "ERR ESPNOW_CALL_MAP_SET_VOLATILE tone_wav_deprecated_use_kind_tone LA_BUSY"
        },
        "espnow_call_map_get": {
          "LA_OK": {
            "kind": "tone",
            "profile": "FR_FR",
            "event": "busy"
          }
        },
        "play_legacy_tone": {
          "ok": false,
          "line": "ERR PLAY tone_wav_deprecated_use_TONE_PLAY"
        },
        "tone_play": {
          "ok": true,
          "line": "OK TONE_PLAY"
        },
        "status_after_tone_play": {
          "board_profile": "ESP32_A252",
          "active_scene": "",
          "active_step": "",
          "hotline_validation_state": "none",
          "telephony": {
            "state": "IDLE",
            "hook": "ON_HOOK",
            "powered": true,
            "power_probe_active": false,
            "slic_power_down": false,
            "dial_buffer": "",
            "dial_source": "NONE",
            "dial_match_state": "NONE",
            "hotline_active": false,
            "hotline_current_key": "",
            "hotline_queued_key": "",
            "hotline_next_restart_ms": 0,
            "hotline_ringback_active": false,
            "hotline_ringback_until_ms": 0,
            "hotline_ringback_profile": "NONE",
            "hotline_validation_state": "none",
            "pending_espnow_call": false,
            "pending_espnow_call_kind": "file",
            "pending_espnow_call_profile": "NONE",
            "pending_espnow_call_event": "NONE",
            "pending_espnow_call_audio": "",
            "pending_espnow_call_source": "AUTO"
          },
          "audio_frames_requested": 0,
          "audio_frames_read": 0,
          "audio_drop_frames": 0,
          "audio_underrun_count": 0,
          "audio_last_latency_ms": 0,
          "audio_max_latency_ms": 0,
          "audio": {
            "full_duplex": true,
            "ready": true,
            "dial_tone_active": false,
            "tone_route_active": false,
            "tone_rendering": false,
            "tone_active": false,
            "tone_profile": "NONE",
            "tone_event": "none",
            "tone_engine": "NONE",
            "playback_input_sample_rate": 0,
            "playback_input_bits_per_sample": 0,
            "playback_input_channels": 0,
            "playback_output_sample_rate": 8000,
            "playback_output_bits_per_sample": 16,
            "playback_output_channels": 2,
            "playback_resampler_active": false,
            "playback_channel_upmix_active": false,
            "playback_loudness_auto": false,
            "playback_loudness_gain_db": 0,
            "playback_limiter_active": false,
            "playback_rate_fallback": 0,
            "playback_copy_source_bytes": 0,
            "playback_copy_accepted_bytes": 0,
            "playback_copy_loss_bytes": 0,
            "playback_copy_loss_events": 0,
            "playback_last_error": "",
            "playback_sample_rate": 8000,
            "playback_bits_per_sample": 16,
            "playback_channels": 2,
            "playback_format_overridden": false,
            "playing": false,
            "sd_ready": false,
            "littlefs_ready": false,
            "storage_default_policy": "SD_THEN_LITTLEFS",
            "storage_last_source": "NONE",
            "storage_last_path": "",
            "frames": 0,
            "underrun": 0,
            "drop": 0,
            "latence_ms": 0,
            "adc_fft_peak_bin": 0,
            "adc_fft_peak_freq_hz": 0,
            "adc_fft_peak_mag": 0,
            "tone_jitter_us_max": 0,
            "tone_write_miss_count": 0
          },
          "scope_display": {
            "supported": false,
            "enabled": false,
            "frequency": 1200,
            "amplitude": 48
          },
          "espnow": {
            "ready": true,
            "device_name": "HOTLINE_PHONE",
            "peer_count": 2,
            "tx_ok": 2,
            "tx_fail": 0,
            "rx_count": 0,
            "last_rx_mac": "",
            "last_rx_payload": "",
            "peers": [
              "10:20:BA:58:C7:49",
              "10:20:BA:58:C7:48"
            ],
            "hotline_notify_last_event": "",
            "hotline_notify_last_ok": false,
            "peer_discovery_enabled": true,
            "peer_discovery_interval_ms": 30000,
            "peer_discovery_ack_window_ms": 2500,
            "peer_discovery_next_probe_ms": 62830,
            "peer_discovery_probe_pending": false,
            "peer_discovery_probe_msg_id": "",
            "peer_discovery_probe_seq": 0,
            "peer_discovery_probes_sent": 1,
            "peer_discovery_probe_send_fail": 0,
            "peer_discovery_probe_ack_seen": 0,
            "peer_discovery_auto_add_new_ok": 0,
            "peer_discovery_auto_add_fail": 0,
            "peer_discovery_last_mac": "",
            "peer_discovery_last_device_name": "",
            "peer_discovery_last_error": "",
            "scene_sync_enabled": true,
            "scene_sync_interval_ms": 30000,
            "scene_sync_pending": false,
            "scene_sync_msg_id": "",
            "scene_sync_seq": 0,
            "scene_sync_requests_sent": 1,
            "scene_sync_request_send_fail": 0,
            "scene_sync_ack_ok": 0,
            "scene_sync_ack_fail": 1,
            "scene_sync_last_error": "scene_sync_timeout",
            "scene_sync_last_source": "",
            "scene_sync_last_update_ms": 0
          },
          "hw": {
            "init_ok": true,
            "slic_ready": true,
            "codec_ready": true,
            "audio_ready": true
          },
          "config": {
            "pins": {
              "i2s": {
                "bck": 27,
                "ws": 25,
                "dout": 26,
                "din": 35
              },
              "codec_i2c": {
                "sda": 33,
                "scl": 32
              },
              "slic": {
                "rm": 18,
                "fr": 5,
                "shk": 23,
                "line": -1,
                "pd": 19,
                "adc_in": -1,
                "hook_active_high": false
              },
              "pcm": {
                "flt": -1,
                "demp": -1,
                "xsmt": -1,
                "fmt": -1
              }
            },
            "audio": {
              "sample_rate": 8000,
              "bits_per_sample": 16,
              "enable_capture": false,
              "adc_dsp_enabled": true,
              "adc_fft_enabled": true,
              "adc_dsp_fft_downsample": 2,
              "adc_fft_ignore_low_bin": 1,
              "adc_fft_ignore_high_bin": 1,
              "volume": 100,
              "mute": false,
              "route": "rtc",
              "clock_policy": "HYBRID_TELCO",
              "wav_loudness_policy": "FIXED_GAIN_ONLY",
              "wav_target_rms_dbfs": -18,
              "wav_limiter_ceiling_dbfs": -2,
              "wav_limiter_attack_ms": 8,
              "wav_limiter_release_ms": 120
            },
            "espnow_device_name": "HOTLINE_PHONE",
            "espnow_call_map": {
              "LA_OK": {
                "kind": "tone",
                "profile": "FR_FR",
                "event": "busy"
              }
            },
            "dial_media_map": {
              "0123456789": {
                "kind": "tone",
                "profile": "FR_FR",
                "event": "ringback"
              }
            },
            "espnow_peers": [
              "10:20:BA:58:C7:49",
              "10:20:BA:58:C7:48"
            ]
          },
          "config_migrations": {
            "espnow_call_map_reset": false,
            "dial_media_map_reset": false
          },
          "firmware": {
            "build_id": "Feb 28 2026 04:56:16",
            "git_sha": "unknown",
            "contract_version": "A252_AUDIO_CHAIN_V4"
          }
        },
        "tone_stop": {
          "ok": true,
          "line": "OK TONE_STOP"
        },
        "status_after_tone_stop": {
          "board_profile": "ESP32_A252",
          "active_scene": "",
          "active_step": "",
          "hotline_validation_state": "none",
          "telephony": {
            "state": "IDLE",
            "hook": "ON_HOOK",
            "powered": true,
            "power_probe_active": false,
            "slic_power_down": false,
            "dial_buffer": "",
            "dial_source": "NONE",
            "dial_match_state": "NONE",
            "hotline_active": false,
            "hotline_current_key": "",
            "hotline_queued_key": "",
            "hotline_next_restart_ms": 0,
            "hotline_ringback_active": false,
            "hotline_ringback_until_ms": 0,
            "hotline_ringback_profile": "NONE",
            "hotline_validation_state": "none",
            "pending_espnow_call": false,
            "pending_espnow_call_kind": "file",
            "pending_espnow_call_profile": "NONE",
            "pending_espnow_call_event": "NONE",
            "pending_espnow_call_audio": "",
            "pending_espnow_call_source": "AUTO"
          },
          "audio_frames_requested": 0,
          "audio_frames_read": 0,
          "audio_drop_frames": 0,
          "audio_underrun_count": 0,
          "audio_last_latency_ms": 0,
          "audio_max_latency_ms": 0,
          "audio": {
            "full_duplex": true,
            "ready": true,
            "dial_tone_active": false,
            "tone_route_active": false,
            "tone_rendering": false,
            "tone_active": false,
            "tone_profile": "NONE",
            "tone_event": "none",
            "tone_engine": "NONE",
            "playback_input_sample_rate": 0,
            "playback_input_bits_per_sample": 0,
            "playback_input_channels": 0,
            "playback_output_sample_rate": 8000,
            "playback_output_bits_per_sample": 16,
            "playback_output_channels": 2,
            "playback_resampler_active": false,
            "playback_channel_upmix_active": false,
            "playback_loudness_auto": false,
            "playback_loudness_gain_db": 0,
            "playback_limiter_active": false,
            "playback_rate_fallback": 0,
            "playback_copy_source_bytes": 0,
            "playback_copy_accepted_bytes": 0,
            "playback_copy_loss_bytes": 0,
            "playback_copy_loss_events": 0,
            "playback_last_error": "",
            "playback_sample_rate": 8000,
            "playback_bits_per_sample": 16,
            "playback_channels": 2,
            "playback_format_overridden": false,
            "playing": false,
            "sd_ready": false,
            "littlefs_ready": false,
            "storage_default_policy": "SD_THEN_LITTLEFS",
            "storage_last_source": "NONE",
            "storage_last_path": "",
            "frames": 0,
            "underrun": 0,
            "drop": 0,
            "latence_ms": 0,
            "adc_fft_peak_bin": 0,
            "adc_fft_peak_freq_hz": 0,
            "adc_fft_peak_mag": 0,
            "tone_jitter_us_max": 0,
            "tone_write_miss_count": 0
          },
          "scope_display": {
            "supported": false,
            "enabled": false,
            "frequency": 1200,
            "amplitude": 48
          },
          "espnow": {
            "ready": true,
            "device_name": "HOTLINE_PHONE",
            "peer_count": 2,
            "tx_ok": 2,
            "tx_fail": 0,
            "rx_count": 0,
            "last_rx_mac": "",
            "last_rx_payload": "",
            "peers": [
              "10:20:BA:58:C7:49",
              "10:20:BA:58:C7:48"
            ],
            "hotline_notify_last_event": "",
            "hotline_notify_last_ok": false,
            "peer_discovery_enabled": true,
            "peer_discovery_interval_ms": 30000,
            "peer_discovery_ack_window_ms": 2500,
            "peer_discovery_next_probe_ms": 62830,
            "peer_discovery_probe_pending": false,
            "peer_discovery_probe_msg_id": "",
            "peer_discovery_probe_seq": 0,
            "peer_discovery_probes_sent": 1,
            "peer_discovery_probe_send_fail": 0,
            "peer_discovery_probe_ack_seen": 0,
            "peer_discovery_auto_add_new_ok": 0,
            "peer_discovery_auto_add_fail": 0,
            "peer_discovery_last_mac": "",
            "peer_discovery_last_device_name": "",
            "peer_discovery_last_error": "",
            "scene_sync_enabled": true,
            "scene_sync_interval_ms": 30000,
            "scene_sync_pending": false,
            "scene_sync_msg_id": "",
            "scene_sync_seq": 0,
            "scene_sync_requests_sent": 1,
            "scene_sync_request_send_fail": 0,
            "scene_sync_ack_ok": 0,
            "scene_sync_ack_fail": 1,
            "scene_sync_last_error": "scene_sync_timeout",
            "scene_sync_last_source": "",
            "scene_sync_last_update_ms": 0
          },
          "hw": {
            "init_ok": true,
            "slic_ready": true,
            "codec_ready": true,
            "audio_ready": true
          },
          "config": {
            "pins": {
              "i2s": {
                "bck": 27,
                "ws": 25,
                "dout": 26,
                "din": 35
              },
              "codec_i2c": {
                "sda": 33,
                "scl": 32
              },
              "slic": {
                "rm": 18,
                "fr": 5,
                "shk": 23,
                "line": -1,
                "pd": 19,
                "adc_in": -1,
                "hook_active_high": false
              },
              "pcm": {
                "flt": -1,
                "demp": -1,
                "xsmt": -1,
                "fmt": -1
              }
            },
            "audio": {
              "sample_rate": 8000,
              "bits_per_sample": 16,
              "enable_capture": false,
              "adc_dsp_enabled": true,
              "adc_fft_enabled": true,
              "adc_dsp_fft_downsample": 2,
              "adc_fft_ignore_low_bin": 1,
              "adc_fft_ignore_high_bin": 1,
              "volume": 100,
              "mute": false,
              "route": "rtc",
              "clock_policy": "HYBRID_TELCO",
              "wav_loudness_policy": "FIXED_GAIN_ONLY",
              "wav_target_rms_dbfs": -18,
              "wav_limiter_ceiling_dbfs": -2,
              "wav_limiter_attack_ms": 8,
              "wav_limiter_release_ms": 120
            },
            "espnow_device_name": "HOTLINE_PHONE",
            "espnow_call_map": {
              "LA_OK": {
                "kind": "tone",
                "profile": "FR_FR",
                "event": "busy"
              }
            },
            "dial_media_map": {
              "0123456789": {
                "kind": "tone",
                "profile": "FR_FR",
                "event": "ringback"
              }
            },
            "espnow_peers": [
              "10:20:BA:58:C7:49",
              "10:20:BA:58:C7:48"
            ]
          },
          "config_migrations": {
            "espnow_call_map_reset": false,
            "dial_media_map_reset": false
          },
          "firmware": {
            "build_id": "Feb 28 2026 04:56:16",
            "git_sha": "unknown",
            "contract_version": "A252_AUDIO_CHAIN_V4"
          }
        },
        "dial_media_map_reset_volatile": {
          "ok": true,
          "line": "OK DIAL_MEDIA_MAP_RESET_VOLATILE"
        },
        "espnow_call_map_reset_volatile": {
          "ok": true,
          "line": "OK ESPNOW_CALL_MAP_RESET_VOLATILE"
        },
        "checks": {
          "dial_media_map_set_ok": true,
          "espnow_call_map_set_ok": true,
          "espnow_call_map_set_legacy_tone_rejected": true,
          "dial_media_map_reset_volatile_ok": true,
          "espnow_call_map_reset_volatile_ok": true,
          "dial_media_map_status_present": true,
          "espnow_call_map_status_present": true,
          "play_legacy_tone_rejected": true,
          "tone_play_ok": true,
          "tone_route_active_after_play": false,
          "tone_rendering_after_play": false,
          "tone_event_after_play": false,
          "tone_stop_ok": true,
          "tone_route_inactive_after_stop": true,
          "tone_rendering_present": true,
          "tone_route_present": true,
          "playback_sample_rate_present": true,
          "playback_bits_present": true,
          "playback_channels_present": true,
          "playback_bits_supported": true,
          "playback_channels_supported": true,
          "playback_format_overridden_bool": true,
          "playback_format_consistent_with_config": true,
          "storage_fields_present": true,
          "tone_fields_present": true
        }
      }
    },
    {
      "name": "serial_audio_format_chain",
      "state": "FAIL",
      "details": {
        "audio_policy_get": {
          "clock_policy": "HYBRID_TELCO",
          "wav_loudness_policy": "FIXED_GAIN_ONLY",
          "wav_target_rms_dbfs": -18,
          "wav_limiter_ceiling_dbfs": -2,
          "wav_limiter_attack_ms": 8,
          "wav_limiter_release_ms": 120
        },
        "audio_probe_attempts": [
          {
            "path": "/welcome.wav",
            "response": {
              "ok": false,
              "line": "ERR AUDIO_PROBE file_not_found"
            }
          },
          {
            "path": "/musique.wav",
            "response": {
              "ok": false,
              "line": "ERR AUDIO_PROBE file_not_found"
            }
          }
        ],
        "checks": {
          "audio_policy_get_is_json": true,
          "audio_probe_found_supported_file": false
        }
      }
    },
    {
      "name": "serial_network_stack",
      "state": "FAIL",
      "details": {
        "wifi_status_before": {
          "connected": false,
          "status": 6,
          "ssid": "",
          "ip": "",
          "rssi": 0,
          "channel": 0,
          "mode": "APSTA"
        },
        "wifi_scan": [
          {
            "ssid": "Les cils",
            "rssi": -54,
            "chan": 11,
            "enc": 4
          },
          {
            "ssid": "CILS House",
            "rssi": -65,
            "chan": 8,
            "enc": 7
          },
          {
            "ssid": "Les cils",
            "rssi": -76,
            "chan": 6,
            "enc": 3
          },
          {
            "ssid": "La-clic",
            "rssi": -76,
            "chan": 1,
            "enc": 3
          },
          {
            "ssid": "Les cils",
            "rssi": -80,
            "chan": 1,
            "enc": 4
          }
        ],
        "ping_before_espnow": {
          "ok": true,
          "result": "PONG"
        },
        "espnow_status": [
          "10:20:BA:58:C7:49",
          "10:20:BA:58:C7:48"
        ]
      }
    },
    {
      "name": "http_endpoints",
      "state": "MANUAL_SKIP",
      "details": {
        "note": "base URL not provided"
      }
    },
    {
      "name": "manual_hook_transition",
      "state": "MANUAL_SKIP",
      "details": {
        "note": "validated manually"
      }
    },
    {
      "name": "manual_ring_behavior",
      "state": "MANUAL_SKIP",
      "details": {
        "note": "validated manually"
      }
    },
    {
      "name": "manual_audio_path",
      "state": "MANUAL_SKIP",
      "details": {
        "note": "validated manually"
      }
    },
    {
      "name": "manual_hfp_pairing",
      "state": "MANUAL_SKIP",
      "details": {
        "note": "validated manually"
      }
    }
  ]
}
